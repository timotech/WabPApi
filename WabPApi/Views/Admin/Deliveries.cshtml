@model IEnumerable<WabPApi.Models.OrderDetail>

@{
    ViewData["Title"] = "Deliveries";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

    <div class="card shadow mb-4">
        <div class="card-header">
            <h3 class="card-title">@ViewData["Title"]</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-12">
                    <h3>All Orders</h3>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Email</th>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Date</th>
                                <th>Quantity</th>
                                @*<th>Price</th>*@
                                <th>Total</th>
                                <th>Image</th>
                                <th>Payment</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var mat in Model)
                        {
                            var photoPath4 = "~/images/" + (mat.Book.PicPath ?? "placehold.jpg");
                            <tr>
                                <td>@mat.Order.Email</td>
                                <td>@mat.Order.FirstName @mat.Order.LastName</td>
                                <td>@mat.Order.Phone</td>
                                <td>@mat.Order.OrderDate</td>
                                <td>@mat.Quantity</td>
                                @*<td>@mat.UnitPrice</td>*@
                                <td>@mat.Order.Total</td>
                                <td>
                                    <img class="img-thumbnail" src=@photoPath4 id="imgPix2" height="100" width="60" asp-append-version="true" />
                                </td>
                                <td>
                                    @if (mat.PaymentStatus == 0)
                                    {
                                    <label><strong>Pay On Delivery</strong></label>
                                    }
                                    else
                                    {
                                    <label><strong>Paid</strong></label>
                                    }
                                </td>
                                <td>
                                    @*<select id="ddlStatus" class="custom-select">
                                        <option value="0" selected="selected">In Process</option>
                                        <option value="1">On the way to delivery</option>
                                        <option value="2">Delivered</option>
                                    </select>*@
                                    @(mat.DeliveryStatus == 1 ? "On the way to Delivery" : "Delivered")
                                    <br />
                                    @if (mat.DeliveryStatus == 1)
                                    {
                                    <a asp-controller="Admin" asp-action="ProcessDelivery" asp-route-Id="@mat.OrderDetailId" class="btn btn-warning text-white">Set As Delivered</a>
                                    }
                                </td>
                            </tr>
                        }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>